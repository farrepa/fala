{% if data and data.count and data.count > 0 %}
  <section class="legal-adviser-results">
    <p class="results-summary">
      {% trans count=data.results|length %}Showing {{ count }} results around{% endtrans %}
      <span class="results-location">{{ data.origin.postcode }}</span>
    </p>

    <div class="search-results-container">
      <div id="resultsMap" class="map" data-lat="{{ data.origin.point.coordinates.1 }}" data-lon="{{ data.origin.point.coordinates.0 }}"></div>
      <div class="search-results">

        <div class="search-results-list">
          <ul class="org-list">
            {% for item in data.results %}
              <li class="org-list-item vcard" data-lat="{{ item.location.point.coordinates.1 }}" data-lon="{{ item.location.point.coordinates.0 }}" data-id="{{ loop.index }}">
                <header class="org-summary">
                  <h3 class="org-title">
                    <span class="marker">{{ loop.index}}</span>
                    <span class="fn org">{{ item.organisation.name }}</span>
                  </h3>
                  <div class="distance">
                    <span class="u-vh">{{ _('Distance') }}</span>
                    {% trans miles=item.distance|round(2) %}{{ miles }} miles{% endtrans %}
                  </div>
                </header>
                <div class="org-details">
                  <p>
                    <span class="sr-only">{{ _('Address') }}:</span>
                    <span class="adr">
                      <span class="street-address">{{ item.location.address }}</span>
                      <span class="postal-code">{{ item.location.postcode }}</span>
                      <span class="city">{{ item.location.city }}</span>
                    </span>
                  </p>
                  <p>
                    <span>{{ _('Helpline') }}:</span>
                    <span class="tel">{{ item.telephone }}</span>
                  </p>
                  {% if item.organisation.website %}
                    <p>
                      <span>{{ _('Website') }}:</span>
                      <a class="url" href="{{ item.organisation.website }}" target="_blank" rel="external">
                        {{ item.organisation.website }}
                      </a>
                    </p>
                  {% endif %}
                  {% if item.categories|length %}
                    <div class="org-categories" role="list">
                      <div class="sr-only">{{ _('Categories of law') }}</div>
                      {% for cat in item.categories %}
                        {% if cat %}
                          <span class="org-category" role="listitem">{{ cat }}</span>
                          {%- if not loop.last %},{% endif %}
                        {% endif %}
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </li>
            {% endfor %}
          </ul>
        </div>

        <nav class="search-results-pagination">
          <ul>
            {% if data.previous %}
              <li class="results-nav results-nav-prev">
                <a href="{{ LAALAA_API_HOST }}" data-page="1">
                  {{ _('Previous') }}
                </a>
              </li>
            {% endif %}
            {% if data.next %}
              <li class="results-nav results-nav-next">
                <a href="{{ LAALAA_API_HOST }}" data-page="2">
                  {{ _('Next') }}
                </a>
              </li>
            {% endif %}
          </ul>
        </nav>

      </div>
    </div>
</section>
{% elif 'count' in data and data.count == 0 %}
  {% from "macros/element.html" import alert %}
  {% call alert(title=_('No results')) %}
    {{ _('There are no results matching your search criteria.') }}
  {% endcall %}
{% endif %}
